spring.application.name=biblioteca-backend

# Database Configuration
spring.datasource.url=jdbc:oracle:thin:@localhost:1521/XEPDB1
spring.datasource.username=${DB_USERNAME:xaviaerox}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# JPA / Hibernate
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect

# AI Service Configuration
ai.service.url=${AI_SERVICE_URL:http://ai-service:8000/api/recommend}
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration-ms=86400000

# Telegram Configuration
app.telegram.bot-token=${TELEGRAM_BOT_TOKEN}
app.telegram.admin-chat-id=${TELEGRAM_ADMIN_CHAT_ID:-4870856336}

# Gemini API Key (via environment variable)
gemini.api.key=${GEMINI_API_KEY}

# Library Policies
app.policy.prestamo-dias=${PRESTAMO_DIAS:15}
app.policy.reserva-horas=${RESERVA_HORAS:24}

# Server
server.port=9091

# Cookie Security (false for local dev, set APP_COOKIE_SECURE=true in production)
app.cookie.secure=${APP_COOKIE_SECURE:false}

# Swagger/OpenAPI
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# Actuator endpoints - SEGURIDAD: Exposición mínima
# Solo health está público en SecurityConfig, el resto requiere ADMIN
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never
management.info.env.enabled=false

# Application info for /actuator/info
info.app.name=Biblioteca Web
info.app.version=2.2.0
info.app.description=Sistema de gestion de biblioteca

# Logging with MDC support
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%X{requestId}] [%thread] %-5level %logger{36} - %msg%n


# File Logging for Production
logging.file.name=logs/biblioteca-backend.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=7
# Jackson Configuration to handle Hibernate proxies
spring.jackson.serialization.fail-on-empty-beans=false
